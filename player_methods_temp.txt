// Add these methods to player.js after the spawnAfterburner method

    takeDamage(amount) {
        // Check if player is invulnerable
        if (this.invulnerableTimer > 0 || this.invulnerabilityTimer > 0) {
            return false; // No damage taken
        }
        
        this.currentHealth -= amount;
        this.damageFlashTimer = 0.2; // Flash for 200ms
        this.invulnerableTimer = this.invulnerableDuration;
        
        // Play damage sound
        if (this.game.audio) {
            this.game.audio.explosion(); // Reuse explosion sound for now
        }
        
        // Check if dead
        if (this.currentHealth <= 0) {
            this.currentHealth = 0;
            return true; // Player died
        }
        
        return false; // Player survived
    }
    
    applyPowerUp(type) {
        const duration = 5.0; // 5 seconds for all power-ups
        
        switch(type) {
            case 'speed':
                this.speedBoostTimer = duration;
                break;
            case 'slowmo':
                this.slowMotionTimer = duration;
                break;
            case 'invulnerability':
                this.invulnerabilityTimer = duration;
                break;
        }
        
        // Play power-up sound
        if (this.game.audio) {
            this.game.audio.dash(); // Reuse dash sound for now
        }
    }
    
    isInvulnerable() {
        return this.invulnerableTimer > 0 || this.invulnerabilityTimer > 0;
    }
